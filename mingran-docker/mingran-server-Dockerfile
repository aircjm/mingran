FROM openjdk:8u171-jdk-alpine3.8 AS build

WORKDIR /app

COPY ./mingran-server /app/
RUN sh gradlew build -x test --no-daemon

RUN ls -la build/libs/
RUN mv build/libs/*.jar app.jar
RUN java -version
RUN ls -lh
RUN chmod a+x app.jar
  #启动容器之后，默认的运行命令
ENTRYPOINT ["java","-jar","app.jar"]
